{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jayaramkumar/Desktop/Software-Development/2Milestone/Milestone-Project-2/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jayaramkumar/Desktop/Software-Development/2Milestone/Milestone-Project-2/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jayaramkumar/Desktop/Software-Development/2Milestone/Milestone-Project-2/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{useParams,useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MovieDetails(){var _ref2;var _useParams=useParams(),id=_useParams.id;var history=useHistory();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),movie=_useState2[0],setMovie=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var _ref;var fetchData=function fetchData(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,resData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5001/movies/\".concat(id));case 3:response=_context.sent;if(response.ok){_context.next=6;break;}throw new Error('Network response was not ok');case 6:_context.next=8;return response.json();case 8:resData=_context.sent;setMovie(resData);setLoading(false);_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);setError(_context.t0);setLoading(false);case 17:case\"end\":return _context.stop();}},_callee,null,[[0,13]]);}))).apply(this,arguments);};fetchData();},[id]);var handleDelete=function handleDelete(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5001/movies/\".concat(id),{method:'DELETE'});case 3:response=_context2.sent;if(!response.ok){_context2.next=8;break;}// Movie deleted successfully, you can navigate to a different page\nhistory.push('/movies');_context2.next=9;break;case 8:throw new Error('Failed to delete movie');case 9:_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:movie?movie.title:'Loading...'}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):error?/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error.message]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:movie.rated}),/*#__PURE__*/_jsx(\"img\",{style:{width:'200px'},src:movie.pic,alt:movie.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Rated \",movie.rated,\", \",movie.duration,\" Minutes\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,children:\"Delete Movie\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return history.goBack();},children:\"Go Back\"})]})]});}export default MovieDetails;","map":{"version":3,"names":["React","useEffect","useState","useParams","useHistory","jsx","_jsx","jsxs","_jsxs","MovieDetails","_ref2","_useParams","id","history","_useState","_useState2","_slicedToArray","movie","setMovie","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_ref","fetchData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","resData","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","Error","json","t0","stop","apply","arguments","handleDelete","_callee2","_callee2$","_context2","method","push","console","children","title","message","rated","style","width","src","pic","alt","duration","onClick","goBack"],"sources":["/Users/jayaramkumar/Desktop/Software-Development/2Milestone/Milestone-Project-2/frontend/src/components/MoviesDetails.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\n\nfunction MovieDetails() {\n  const { id } = useParams();\n  const history = useHistory();\n  const [movie, setMovie] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch(`http://localhost:5001/movies/${id}`);\n        if (!response.ok) {\n          throw new Error('Network response was not ok');\n        }\n        const resData = await response.json();\n        setMovie(resData);\n        setLoading(false);\n      } catch (err) {\n        setError(err);\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [id]);\n\n  const handleDelete = async () => {\n    try {\n      const response = await fetch(`http://localhost:5001/movies/${id}`, {\n        method: 'DELETE',\n      });\n\n      if (response.ok) {\n        // Movie deleted successfully, you can navigate to a different page\n        history.push('/movies');\n      } else {\n        throw new Error('Failed to delete movie');\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <div>\n      <h1>{movie ? movie.title : 'Loading...'}</h1>\n      {loading ? (\n        <p>Loading...</p>\n      ) : error ? (\n        <p>Error: {error.message}</p>\n      ) : (\n        <div>\n          <p>{movie.rated}</p>\n          <img style={{ width: '200px' }} src={movie.pic} alt={movie.title} />\n          <p>\n            Rated {movie.rated}, {movie.duration} Minutes\n          </p>\n          {/* Delete button */}\n          <button onClick={handleDelete}>Delete Movie</button>\n          {/* Go Back button */}\n          <button onClick={() => history.goBack()}>Go Back</button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default MovieDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}